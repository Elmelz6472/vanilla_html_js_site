<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day for Me Reservation</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Add the font-family to the headings and labels */
        h2,
        label,
        input,
        p,
        button,
        li {
            font-family: 'Dancing Script', cursive;
        }

    </style>
</head>

<body>

    <nav>
        <a href="index.html">Home</a>
        <!-- <a href="form.html">Reservation</a> -->
        <a href="#" onclick="logout()">Log Out</a>
    </nav>

    <script>
        // Check if the user is logged in
        const isLogged = localStorage.getItem("logged") === "true";

        if (!isLogged) {
            // Redirect to password.html if not logged in
            window.location.href = 'password.html';
        }

        function logout() {
            localStorage.setItem("logged", false);
            window.location.href = 'password.html';
        }

        // Function to show the popup
        function showPopup() {
            const confirmationPopup = document.getElementById('confirmationPopup');
            confirmationPopup.style.display = 'block';

            // Close the popup if clicked outside of it
            window.onclick = function (event) {
                if (event.target === confirmationPopup) {
                    closePopup();
                }
            };
        }

        // Function to close the popup
        function closePopup() {
            const confirmationPopup = document.getElementById('confirmationPopup');
            confirmationPopup.style.display = 'none';

            // Remove the click event on window to avoid interference
            window.onclick = null;
        }
    </script>

    <!-- Additional Container for Special Surprise Explanation -->
    <div class="special-surprise-container">
        <h2>Special Surprise</h2>
        <p>
            I have a special surprise planned for you on this day. Without giving away too much,
            be prepared for an unforgettable and delightful experience that complements your relaxing day!
        </p>
    </div>

    <div class="container">
        <div id="reservationForm" class="reservation-section">
            <h2>Day for Me Reservation</h2>
            <form id="spaForm">
                <label for="clothesToBring">Clothes to Bring:</label>
                <input type="text" id="clothesToBring" name="clothesToBring"
                    placeholder="Enter the clothes you should bring">

                <label for="foodToBring">Food to Bring/Cook:</label>
                <input type="text" id="foodToBring" name="foodToBring"
                    placeholder="Enter the food you should bring/cook">

                <label for="candyToBring">Candy to Bring:</label>
                <input type="text" id="candyToBring" name="candyToBring" placeholder="Enter the candy you should bring">

                <label for="chocolateToBring">Chocolate to Bring:</label>
                <input type="text" id="chocolateToBring" name="chocolateToBring"
                    placeholder="Enter the chocolate you should bring">

                <label for="extraBlankets">Extra Blankets:</label>
                <input type="text" id="extraBlankets" name="extraBlankets"
                    placeholder="Specify if you need extra blankets">

                <label for="iceCreamToBring">Ice Cream to Bring:</label>
                <input type="text" id="iceCreamToBring" name="iceCreamToBring"
                    placeholder="Enter the ice cream you should bring">

                <label for="specialRequests">Special Requests:</label>
                <input type="text" id="specialRequests" name="specialRequests" placeholder="Any special requests">

                <label for="otherUsefulThings">Other Useful Things:</label>
                <input type="text" id="otherUsefulThings" name="otherUsefulThings"
                    placeholder="Anything else that might be useful for your day">

                <button type="submit">Submit</button>
            </form>
        </div>
        <div class="suggestion-card">
            <h3>Suggestions</h3>
            <ul>
                <li>Try a relaxing herbal tea during your day.</li>
                <li>Create a calming playlist for your spa day.</li>
                <li>Consider aromatherapy for an enhanced experience.</li>
                <!-- Add more suggestions as needed -->
            </ul>
        </div>
    </div>



<script type="module">
    // Import Firebase SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-database.js";

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAp4xLElYz5eEcrnfjtQGO8fYrHli-YrXg",
        authDomain: "spaa-dc965.firebaseapp.com",
        projectId: "spaa-dc965",
        storageBucket: "spaa-dc965.appspot.com",
        messagingSenderId: "394735502752",
        appId: "1:394735502752:web:266ede15ac71454bee90c5",
        measurementId: "G-TJTDYSW8N1"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase();

    // Function to submit form data to Firebase
    function submitForm(e) {
        e.preventDefault(); // Prevent default form submission

        const form = document.getElementById('spaForm');
        const formData = new FormData(form);

        // Convert FormData to JSON
        const data = {};
        formData.forEach((value, key) => {
            data[key] = value;
        });

        // Push data to Firebase
        const reservationsRef = ref(database, 'day4me_reservations');
        push(reservationsRef, data);

        console.log("Form submitted");

        // Redirect to confirmation page
        window.location.href = 'confirmation.html';

        // Optionally, you can reset the form after submission
        form.reset();
    }

    // Add an event listener to the form's submit event
    const spaForm = document.getElementById('spaForm');
    spaForm.addEventListener('submit', submitForm);
</script>


</body>

</html>